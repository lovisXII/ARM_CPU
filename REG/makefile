# Makefile automatically generated by ghdl
# Version: GHDL 0.37 (Ubuntu 0.37+dfsg-1ubuntu1) [Dunoon edition] - mcode code generator
# Command used to generate this makefile:
# ghdl --gen-makefile reg_tb
#export MBK_TARGET_LIB=/soc/alliance/cells/sxlib/
export MBK_TARGET_LIB=/home/timo/Documents/Cours/alliance/alliance/src/cells/src/sxlib/
GHDL=ghdl
GHDLFLAGS=
GHDLRUNFLAGS=


# Default target : elaborate
all : elab

# Elaborate target.
elab : analyse
		$(GHDL) -c $(GHDLFLAGS) -e reg_tb

.PHONY: run clean

# Run target
run :
		$(GHDL) -c $(GHDLFLAGS) -r reg_tb $(GHDLRUNFLAGS)

# Targets to analyze libraries
analyse: reg.vhdl reg_tb.vhdl one_hot.vhdl
		$(GHDL) -a $(GHDLFLAGS) reg.vhdl
		$(GHDL) -a $(GHDLFLAGS) reg_tb.vhdl
		$(GHDL) -a $(GHDLFLAGS) one_hot.vhdl

clean:
		rm -f *.cf *.vst *.vbe *.xsc *.vcd reg reg_tb

synth: one_hot.vst reg_model.vst

one_hot.vbe: one_hot.vhdl
		vasy -I vhdl -V -o -p -a one_hot.vhdl one_hot

one_hot_o.vbe : one_hot.vbe
		boom -V one_hot one_hot_o

one_hot.vst : one_hot_o.vbe
		boog one_hot_o one_hot

reg.vst : reg.vhdl one_hot.vst
		vasy -I vhdl -V -o -a -p	 reg.vhdl reg

reg_model_o.vbe : reg.vst
		boom -V -O reg_model reg_model_o

reg_model.vst : reg_model_o.vbe
		boog reg_model_o reg_model